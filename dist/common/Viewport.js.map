{"version":3,"sources":["src/Viewport.js"],"names":[],"mappings":"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","file":"src/Viewport.js","sourcesContent":["import React from 'react';\n\n\nvar scaleHeightToFit = function() {\n  var scaleFactor = 1.0;\n  var height = this.props.height;\n  \n  if (height > this.state.containerHeight) {\n    scaleFactor = this.state.containerHeight / height;\n  }\n  \n  return scaleFactor;\n};\n\nvar scaleWidthToFit = function() {\n  var scaleFactor = 1.0;\n  var width = this.props.width;\n\n  if (width > this.state.containerWidth) {\n    scaleFactor = this.state.containerHeight / width;\n  }\n\n  return scaleFactor;\n};\n\nclass Viewport extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n      containerWidth: 0,\n      containerHeight: 0\n    };\n\n    this.updateDimensions = this.updateDimensions.bind(this);\n  }\n\n  updateDimensions() {\n    this.setState({containerWidth: window.innerWidth, containerHeight: window.innerHeight});\n  }\n\n  componentWillMount() {\n    this.updateDimensions();\n  }\n\n  componentDidMount() {\n    window.addEventListener('resize', this.updateDimensions);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.updateDimensions);\n  }\n\n  render() {\n    var autoSize = false;\n    var scaleFactor = 1.0;\n    \n    switch (this.props.mode) {\n      case 'scaleToFit': {\n        scaleFactor = Math.min(scaleWidthToFit.call(this), scaleHeightToFit.call(this));\n        break;\n      }\n      case 'scaleWidthToFit': {\n        scaleFactor = scaleWidthToFit.call(this);\n        break;\n      }\n      case 'scaleHeightToFit': {\n        scaleFactor = scaleHeightToFit.call(this);\n        break;\n      }\n      case 'fill':\n        autoSize = true;\n      default:\n        break;\n    }\n    \n    var width = this.props.width + 'px';\n    var height = this.props.height + 'px';\n    \n    if (autoSize) {\n      width = '100%';\n      height = '100%';\n    }\n    \n    var transform = `scale(${scaleFactor}, ${scaleFactor})`;\n\n    var position = 'absolute';\n    \n    var style = {position, width, height, transform};\n    \n    if (!autoSize && this.props.center) {\n      style.left = '50%';\n      style.top = '50%';\n      style.marginLeft = (this.props.width / (-2)) + 'px';\n      style.marginTop = (this.props.height / (-2)) + 'px';\n    }\n\n    return (\n      <div className=\"viewport\" style={style}>\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nViewport.defaultProps = {\n  width: 800,\n  height: 480,\n  mode: 'scaleToFit',\n  center: true\n};\n\nViewport.propTypes = {\n  width: React.PropTypes.number,\n  height: React.PropTypes.number,\n  mode: React.PropTypes.string,\n  center: React.PropTypes.bool\n};\n\nexport default Viewport;\n"]}