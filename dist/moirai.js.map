{"version":3,"sources":["src/behavior.js","src/game.js","src/gameobject.js","src/scene.js","src/scenedirector.js","src/viewport.js"],"names":[],"mappings":"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","file":"dist/moirai.js","sourcesContent":["import React from 'react';\n\nclass Behavior extends React.Component {\n  render() {\n    return null;\n  }\n}\n\nexport default Behavior;\n","import React from 'react';\r\n\r\nimport Viewport from 'moirai/viewport';\r\nimport SceneDirector from 'moirai/scenedirector'\r\nimport Scene from 'moirai/scene';\r\nimport GameObject from 'moirai/gameobject';\r\n\r\nclass Game extends React.Component {\r\n  render() {\r\n    return (\r\n      <Viewport width=\"auto\" height=\"auto\">\r\n        <SceneDirector>\r\n          <Scene>\r\n            <GameObject type=\"image\" asset=\"hero.png\" position=\"10, 10\" />\r\n          </Scene>\r\n        </SceneDirector>\r\n      </Viewport>\r\n    );\r\n  }\r\n}\r\n\r\nReact.render(<Game />, document.body);\r\n","import React from 'react';\n\nclass GameObject extends React.Component {\n  render() {\n    var position = 'absolute';\n    \n    var pos = this.props.position;\n    if (typeof pos === 'string') {\n      pos = pos.split(',');\n    }\n    \n    var left = pos[0] + 'px';\n    var top = pos[1] + 'px';\n    \n    var style = {position, left, top};\n    \n    return (\n      <div className=\"gameobject\" style={style}>\n\t\t\t\t{this.props.children}\n      </div>\n    );\n  }\n}\n\nGameObject.defaultProps = {\n  position: '0,0'\n};\n\nexport default GameObject;\n","import React from 'react';\n\nclass Scene extends React.Component {\n  render() {\n    var style = {\n      width: '100%',\n      height: '100%'\n    };\n    \n    return (\n      <div className=\"scene\" style={style}>\n\t\t\t\t{this.props.children}\n      </div>\n    );\n  }\n}\n\nexport default Scene;\n","import React from 'react';\n\nclass SceneDirector extends React.Component {\n  render() {\n    var style = {\n      width: '100%',\n      height: '100%'\n    };\n    \n    return (\n      <div className=\"scene-director\" style={style}>\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nexport default SceneDirector;\n","import React from 'react';\n\n\nvar scaleHeightToFit = function() {\n  var scaleFactor = 1.0;\n  var height = parseInt(this.props.height, 10);\n  \n  console.log('height', height);\n  \n  if (height > this.state.containerHeight) {\n    scaleFactor = this.state.containerHeight / height;\n  }\n  \n  console.log('scaleFactor', scaleFactor);\n\n  return scaleFactor;\n};\n\nvar scaleWidthToFit = function() {\n  var scaleFactor = 1.0;\n  var width = parseInt(this.props.width, 10);\n\n  if (width > this.state.containerWidth) {\n    scaleFactor = this.state.containerHeight / width;\n  }\n\n  return scaleFactor;\n};\n\nclass Viewport extends React.Component {\n  constructor() {\n    this.state = {\n      containerWidth: 0,\n      containerHeight: 0\n    };\n\n    this.updateDimensions = this.updateDimensions.bind(this);\n  }\n\n  updateDimensions() {\n    this.setState({containerWidth: window.innerWidth, containerHeight: window.innerHeight});\n    \n    console.log(this.state);\n  }\n\n  componentWillMount() {\n    this.updateDimensions();\n  }\n\n  componentDidMount() {\n    window.addEventListener('resize', this.updateDimensions);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.updateDimensions);\n  }\n\n  render() {\n    var width = (this.props.width === 'auto') ? '100%' : this.props.width + 'px';\n    var height = (this.props.height === 'auto') ? '100%' : this.props.height + 'px';\n    \n    var autoSize = (this.props.width === 'auto') && (this.props.height === 'auto');\n    \n    var scaleFactor = 1.0;\n    \n    if (!autoSize) {\n      console.log('No auto size');\n      \n      switch (this.props.mode) {\n        case 'scaleToFit': {\n          scaleFactor = Math.min(scaleWidthToFit.call(this), scaleHeightToFit.call(this));\n          \n          console.log('scaleFactor', scaleFactor);\n          \n          break;\n        }\n        case 'scaleWidthToFit': {\n          scaleFactor = scaleWidthToFit.call(this);\n          break;\n        }\n        case 'scaleHeightToFit': {\n          scaleFactor = scaleHeightToFit.call(this);\n          break;\n        }\n        default:\n          break;\n      }\n    }\n    \n    var transform = `scale(${scaleFactor}, ${scaleFactor})`;\n\n    var position = 'absolute';\n    \n    var style = {position, width, height, transform};\n    \n    if (!autoSize && this.props.center) {\n      style.left = '50%';\n      style.top = '50%';\n      style.marginLeft = (this.props.width / (-2)) + 'px';\n      style.marginTop = (this.props.height / (-2)) + 'px';\n    }\n\n    return (\n      <div className=\"viewport\" style={style}>\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nViewport.defaultProps = {\n  width: 'auto',\n  height: 'auto',\n  mode: 'scaleToFit',\n  center: true\n};\n\nexport default Viewport;\n"]}